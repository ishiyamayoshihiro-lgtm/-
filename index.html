<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三角比小テスト</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="style.css">
    <script>
        // ローカルで開いた場合は、GitHub Pagesにリダイレクト
        if (window.location.hostname === '' || window.location.protocol === 'file:') {
            window.location.href = 'https://ishiyamayoshihiro-lgtm.github.io/-/';
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>三角比小テスト</h1>
            <p class="subtitle">角度から三角比の値を求めよう</p>
            <p class="version">testver.9</p>
        </header>

        <div id="loginScreen" class="screen">
            <div class="welcome">
                <h2>Googleアカウントでログイン</h2>
                <p>テスト結果を記録するためにログインしてください</p>
                <div id="googleSignInBtn"></div>
                <p id="loginStatus" class="login-status"></p>
            </div>
        </div>

        <div id="menuScreen" class="screen hidden">
            <div class="welcome">
                <h2>テストタイプを選択してください</h2>
                <p id="userEmail" class="user-email"></p>
                <div class="menu-buttons">
                    <button id="selectValueTestBtn" class="btn-menu">
                        <div class="menu-btn-title">値を求める</div>
                        <div class="menu-btn-desc" id="valueTestDesc"><!-- JavaScriptで生成 --></div>
                    </button>
                    <button id="selectAngleTestBtn" class="btn-menu">
                        <div class="menu-btn-title">角度を求める</div>
                        <div class="menu-btn-desc" id="angleTestDesc"><!-- JavaScriptで生成 --></div>
                    </button>
                </div>
            </div>
        </div>

        <div id="valueInstructionScreen" class="screen hidden">
            <div class="instruction">
                <h2>値を求めるテスト</h2>
                <div class="instruction-content">
                    <h3>📋 出題形式</h3>
                    <p>「<strong>sin 30°</strong> の値を求めなさい」のような問題が出題されます。</p>

                    <h3>✏️ 回答方法</h3>
                    <p>選択肢の中から、<strong>正しい値を1つ</strong>選択してください。</p>
                    <p>選択肢の配置例：</p>
                    <div id="valueExampleChoices" class="answer-choices example-answer-choices">
                        <!-- JavaScriptで動的に生成 -->
                    </div>
                    <p class="note">※ クリックするとすぐに次の問題に進みます</p>

                    <h3>⚠️ 注意事項</h3>
                    <p class="warning">回答を送信すると前の問題には戻れませんので、注意して回答してください。</p>
                </div>
                <button id="startValueTestBtn" class="btn-primary">テスト開始</button>
                <button id="backFromValueBtn" class="btn-secondary">戻る</button>
            </div>
        </div>

        <div id="angleInstructionScreen" class="screen hidden">
            <div class="instruction">
                <h2>角度を求めるテスト</h2>
                <div class="instruction-content">
                    <h3>📋 出題形式</h3>
                    <p>「<strong>sin θ = 1/2</strong> となる角度θを求めなさい」のような問題が出題されます。</p>

                    <h3>✏️ 回答方法</h3>
                    <p>9つの角度ボタンの中から、<strong>正しい角度を1つまたは2つ</strong>選択してください。</p>
                    <div id="angleExampleChoices" class="example-choices">
                        <!-- JavaScriptで動的に生成 -->
                    </div>
                    <p class="note">※ 複数の答えがある場合は、すべて選択してください</p>
                    <p class="note">※ 選択後、「送信」ボタンをクリックして次の問題に進みます</p>

                    <h3>⚠️ 注意事項</h3>
                    <p class="warning">回答を送信すると前の問題には戻れませんので、注意して回答してください。</p>
                </div>
                <button id="startAngleTestBtn" class="btn-primary">テスト開始</button>
                <button id="backFromAngleBtn" class="btn-secondary">戻る</button>
            </div>
        </div>

        <div id="quizScreen" class="screen hidden">
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <div class="question-info">
                <span id="questionNumber">問題 1/10</span>
            </div>

            <div class="question-card">
                <h2 id="questionText">sin(30°) の値を求めなさい</h2>

                <!-- 値を求める問題用 -->
                <div id="valueChoices" class="answer-choices">
                    <!-- 選択肢はJavaScriptで動的に生成されます -->
                </div>

                <!-- 角度を求める問題用 -->
                <div id="angleChoices" class="angle-choices hidden">
                    <button class="angle-btn" data-angle="0">0°</button>
                    <button class="angle-btn" data-angle="30">30°</button>
                    <button class="angle-btn" data-angle="45">45°</button>
                    <button class="angle-btn" data-angle="60">60°</button>
                    <button class="angle-btn" data-angle="90">90°</button>
                    <button class="angle-btn" data-angle="120">120°</button>
                    <button class="angle-btn" data-angle="135">135°</button>
                    <button class="angle-btn" data-angle="150">150°</button>
                    <button class="angle-btn" data-angle="180">180°</button>
                    <button id="submitAngleBtn" class="btn-submit">送信</button>
                </div>
            </div>

        </div>

        <div id="resultScreen" class="screen hidden">
            <div class="result-card">
                <h2>テスト結果</h2>
                <div class="score-display">
                    <div class="score-circle">
                        <span id="scoreText">0/10</span>
                    </div>
                    <p class="score-percentage" id="scorePercentage">0%</p>
                </div>

                <div id="resultDetails" class="result-details"></div>

                <button id="retryBtn" class="btn-primary">もう一度挑戦</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
