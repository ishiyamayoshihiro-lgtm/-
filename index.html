<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三角比小テスト</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="stylesheet" href="style.css">
    <script>
        // ローカルで開いた場合は、GitHub Pagesにリダイレクト
        if (window.location.hostname === '' || window.location.protocol === 'file:') {
            window.location.href = 'https://ishiyamayoshihiro-lgtm.github.io/-/';
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>三角比小テスト</h1>
            <p class="subtitle">角度から三角比の値を求めよう</p>
        </header>

        <div id="loginScreen" class="screen">
            <div class="welcome">
                <h2>Googleアカウントでログイン</h2>
                <p>テスト結果を記録するためにログインしてください</p>
                <div id="googleSignInBtn"></div>
                <p id="loginStatus" class="login-status"></p>
            </div>
        </div>

        <div id="menuScreen" class="screen hidden">
            <div class="welcome">
                <h2>テストタイプを選択してください</h2>
                <p id="userEmail" class="user-email"></p>
                <p id="modeInfo" class="mode-info">全27問（テストモード）</p>
                <div class="menu-buttons">
                    <button id="startValueTestBtn" class="btn-menu">
                        <div class="menu-btn-title">値を求める</div>
                        <div class="menu-btn-desc">sin 30° → 1/2</div>
                    </button>
                    <button id="startAngleTestBtn" class="btn-menu">
                        <div class="menu-btn-title">角度を求める</div>
                        <div class="menu-btn-desc">sin θ = 1/2 → 30°, 150°</div>
                    </button>
                </div>
            </div>
        </div>

        <div id="quizScreen" class="screen hidden">
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            <div class="question-info">
                <span id="questionNumber">問題 1/10</span>
            </div>

            <div class="question-card">
                <h2 id="questionText">sin(30°) の値を求めなさい</h2>

                <!-- 値を求める問題用 -->
                <div id="valueChoices" class="answer-choices">
                    <button class="choice-btn" data-value="-√3">-√3</button>
                    <button class="choice-btn" data-value="-1">-1</button>
                    <button class="choice-btn" data-value="-√3/2">-√3/2</button>
                    <button class="choice-btn" data-value="-√2/2">-√2/2</button>
                    <button class="choice-btn" data-value="-1/2">-1/2</button>
                    <button class="choice-btn" data-value="-√3/3">-√3/3</button>
                    <button class="choice-btn" data-value="0">0</button>
                    <button class="choice-btn" data-value="√3/3">√3/3</button>
                    <button class="choice-btn" data-value="1/2">1/2</button>
                    <button class="choice-btn" data-value="√2/2">√2/2</button>
                    <button class="choice-btn" data-value="√3/2">√3/2</button>
                    <button class="choice-btn" data-value="1">1</button>
                    <button class="choice-btn" data-value="√3">√3</button>
                    <button class="choice-btn" data-value="なし">なし</button>
                </div>

                <!-- 角度を求める問題用 -->
                <div id="angleChoices" class="angle-choices hidden">
                    <button class="angle-btn" data-angle="0">0°</button>
                    <button class="angle-btn" data-angle="30">30°</button>
                    <button class="angle-btn" data-angle="45">45°</button>
                    <button class="angle-btn" data-angle="60">60°</button>
                    <button class="angle-btn" data-angle="90">90°</button>
                    <button class="angle-btn" data-angle="120">120°</button>
                    <button class="angle-btn" data-angle="135">135°</button>
                    <button class="angle-btn" data-angle="150">150°</button>
                    <button class="angle-btn" data-angle="180">180°</button>
                    <button id="submitAngleBtn" class="btn-submit">送信</button>
                </div>
            </div>

        </div>

        <div id="resultScreen" class="screen hidden">
            <div class="result-card">
                <h2>テスト結果</h2>
                <div class="score-display">
                    <div class="score-circle">
                        <span id="scoreText">0/10</span>
                    </div>
                    <p class="score-percentage" id="scorePercentage">0%</p>
                </div>

                <div id="resultDetails" class="result-details"></div>

                <button id="retryBtn" class="btn-primary">もう一度挑戦</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>
